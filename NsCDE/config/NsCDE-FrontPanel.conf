#
# This file is a part of the NsCDE - Not so Common Desktop Environment
# Author: Hegel3DReloaded
# Licence: GPLv3
#

#############################################
#                                           #
# FvwmButtons as CDE Front Panel for NsCDE  # 
#                                           #
#############################################

DestroyModuleConfig FrontPanel: *

PipeRead 'echo "*FrontPanel: Geometry 998x76+$(($[vp.width] / 2 - 998 / 2 - 4))-0"'
*FrontPanel: Colorset 21
*FrontPanel: Font $[infostore.font.variable.normal.small]
*FrontPanel: Rows 14
*FrontPanel: Columns 50
*FrontPanel: BoxSize fixed

*FrontPanel: (1x14+0+0, Frame 0, Container(Rows 14, Columns 1, Frame 0))

*FrontPanel: (1x3+0+0, Colorset 1, Id PanelMenu, Frame 1, Icon NsCDE/FpMenu.xpm, Padding 0 0, \
 Action (Mouse 1) Next (FrontPanel, CirculateHit) Menu m_FrontPanelWinMenu rectangle $widthx$height+$left+$top o+0 -100m, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) Menu m_ControlFrontPanelMenu rectangle $widthx$height+$left+$top o+0 -100m, \
 Action (Mouse 2) Next (FrontPanel, CirculateHit) Menu m_TitleBarM2 rectangle $widthx$height+$left+$top o+0 -100m)

*FrontPanel: (1x11+0+3, Id PanelHandleLeft, Frame 1, Icon NsCDE/FpHandle.xpm, Padding 0 0, \
 Action (Mouse 1) Next (FrontPanel, CirculateHit) Move, \
 Action (Mouse 2) Next (FrontPanel, CirculateHit) f_FullyClearFrontPanelPressed, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) RaiseLower)

*FrontPanel: (End)

*FrontPanel: (15x3+1+0, Frame 0, Container(Rows 1, Columns 1, Frame 0))

Test (EnvMatch infostore.NsCDE-Subpanel1-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel1, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel1 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel1")
Test (EnvMatch infostore.NsCDE-Subpanel1-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel1, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 1')

Test (EnvMatch infostore.NsCDE-Subpanel2-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel2, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel2 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel2")
Test (EnvMatch infostore.NsCDE-Subpanel2-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel2, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 2')

Test (EnvMatch infostore.NsCDE-Subpanel3-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel3, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel3 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel3")
Test (EnvMatch infostore.NsCDE-Subpanel3-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel3, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 3')

Test (EnvMatch infostore.NsCDE-Subpanel4-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel4, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel4 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel4")
Test (EnvMatch infostore.NsCDE-Subpanel4-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel4, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 4')

Test (EnvMatch infostore.NsCDE-Subpanel5-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel5, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel5 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel5")
Test (EnvMatch infostore.NsCDE-Subpanel5-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel5, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 5')

*FrontPanel: (End)

*FrontPanel: (15x11+1+3, Frame 1, Container(Rows 1, Columns 5, Frame 0))

*FrontPanel: (1x1, Id Btn1, Frame 0, PressColorset 24, Padding 0 0, Swallow (Respawn) \
 "pclock" "None (pclock) Exec exec $[NSCDE_ROOT]/bin/pclock -w -B $[FVWM_USERDIR]/icons/NsCDE/Fpclock.xpm" \
 Action (Mouse1) f_FrontPanelAction Btn1 M1 29, \
 Action (Mouse2) f_FrontPanelAction Btn1 M2 29, \
 Action (Mouse3) f_FrontPanelAction Btn1 M3 29)

*FrontPanel: (1x1, Id Btn2, Frame 0, PressColorset 24, Swallow (Respawn) "FPMonthDayApplet" \
 "Module FvwmScript MonthDayApplet")

*FrontPanel: (1x1, Id Btn3, Frame 0, PressColorset 24, Icon CDE/Fphome.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn3 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn3 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn3 M3 29)

*FrontPanel: (1x1, Id Btn4, Frame 0, PressColorset 24, Icon CDE/Fpterm.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn4 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn4 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn4 M3 29)

*FrontPanel: (1x1, Frame 0, Id Btn5, PressColorset 24, Swallow (Respawn) \
 "FPCheckMailApplet" "Module FvwmScript CheckMailApplet")

*FrontPanel: (End)

*FrontPanel: (18x14+16+0, Frame 2, Container(Rows 2, Columns 16, Frame 0))

*FrontPanel: (2x1+0+0, Frame 0, Id FpLock, PressColorset 25, Icon CDE/Fplock.s.pm, \
 Action (Mouse 1) f_FrontPanelAction FpLock M1 30, \
 Action (Mouse 2) f_FrontPanelAction FpLock M2 30, \
 Action (Mouse 3) f_FrontPanelAction FpLock M3 30)

*FrontPanel: (2x1+0-0, Frame 0, Id FpPGM, PressColorset 25, Icon NsCDE/Wsm.xpm, \
 Action (Mouse 1) Menu m_GoToPage rectangle $widthx$height+$left+$top o-6 -100m, \
 Action (Mouse 2) f_FrontPanelAction FpPGM M2 30, \
 Action (Mouse 3) f_FrontPanelAction FpPGM M3 30)

*FrontPanel: (12x2+2+0, Frame 0, Id FpWSM, Swallow (Respawn) \
 "WSM" "ModuleSynchronous FvwmScript WSM $[infostore.desknum] $[infostore.pagematrixX] $[infostore.pagematrixY]" \
  Action (Mouse 2) "f_ToggleFvwmModule FvwmScript WsPgMgr $[infostore.desknum] $[infostore.pagematrixX] $[infostore.pagematrixY]")

*FrontPanel: (2x1-0+0, Frame 0, Id FpLite, Swallow (Respawn) \
 "FpLite" "Module FvwmScript FpLite")

*FrontPanel: (2x1-0-0, Frame 0, Id FpExit, PressColorset 25, Icon CDE/Fpexit.s.pm, \
 Action (Mouse 1) f_FrontPanelAction FpExit M1 30, \
 Action (Mouse 2) f_FrontPanelAction FpExit M2 30, \
 Action (Mouse 3) f_FrontPanelAction FpExit M3 30)

*FrontPanel: (End)

*FrontPanel: (15x3+34+0, Frame 0, Container(Rows 1, Columns 5, Frame 0))

Test (EnvMatch infostore.NsCDE-Subpanel6-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel6, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel6 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel6")
Test (EnvMatch infostore.NsCDE-Subpanel6-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel6, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 6')

Test (EnvMatch infostore.NsCDE-Subpanel7-Enabled 1) \
*FrontPanel: (1x1, Id NsCDE-Subpanel7, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel7 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel7")
Test (EnvMatch infostore.NsCDE-Subpanel7-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel7, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 7')

Test (EnvMatch infostore.NsCDE-Subpanel8-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel8, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel8 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel8")
Test (EnvMatch infostore.NsCDE-Subpanel8-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel8, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 8')

Test (EnvMatch infostore.NsCDE-Subpanel9-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel9, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel9 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel9")
Test (EnvMatch infostore.NsCDE-Subpanel9-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel9, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 9')

Test (EnvMatch infostore.NsCDE-Subpanel10-Enabled 1) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel10, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel10 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel10")
Test (EnvMatch infostore.NsCDE-Subpanel10-Enabled 0) \
 *FrontPanel: (1x1, Id NsCDE-Subpanel10, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog SubpanelSettings 10')

*FrontPanel: (End)

*FrontPanel: (15x11+34+3, Frame 1, Container(Rows 1, Columns 5, Frame 0))

*FrontPanel: (1x1, Frame 0, Id Btn6, PressColorset 24, Icon CDE/Fpprnt.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn6 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn6 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn6 M3 29)

*FrontPanel: (1x1, Frame 0, Id Btn7, PressColorset 24, Icon NsCDE/Fpstyle.l.xpm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn7 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn7 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn7 M3 29)

*FrontPanel: (1x1, Frame 0, Id Btn8, PressColorset 24, Icon CDE/Fpapps.l.pm Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn8 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn8 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn8 M3 29)

*FrontPanel: (1x1, Frame 0, Id Btn9, PressColorset 24, Icon NsCDE/Multimedia.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn9 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn9 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn9 M3 29)

*FrontPanel: (1x1, Frame 0, Id Btn10, PressColorset 24, Icon CDE/Fphelp.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn10 M1 29, \
 Action (Mouse 2) f_FrontPanelAction Btn10 M2 29, \
 Action (Mouse 3) f_FrontPanelAction Btn10 M3 29)

*FrontPanel: (End)

*FrontPanel: (1x14+49+0, Frame 0, Container(Rows 14, Columns 1, Frame 0))

*FrontPanel: (1x3-0+0, Colorset 1, Id PanelIconify, Frame 1, Icon NsCDE/FpIconify.xpm, Padding 0 0, \
 Action Next (FrontPanel, CirculateHit) Iconify, \
 Action (Mouse 2) Nop, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) f_RestoreFrontPanel WindowShade South)

*FrontPanel: (1x11-0+3, Id PanelHandleRight, Frame 1, Icon NsCDE/FpHandle.xpm, Padding 0 0, \
 Action Next (FrontPanel, CirculateHit) Move, \
 Action (Mouse 2) Next (FrontPanel, CirculateHit) f_FullyClearFrontPanelPressed, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) RaiseLower)

*FrontPanel: (End)

# Workaround for buggy xdotool which is itself workaround
Schedule 5000 Exec exec $[NSCDE_ROOT]/bin/xdowrapper

