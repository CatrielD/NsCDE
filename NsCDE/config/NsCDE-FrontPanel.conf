#############################################
#                                           #
# FvwmButtons as CDE Front Panel for NsCDE  # 
#                                           #
#############################################

DestroyModuleConfig FrontPanel: *

PipeRead 'echo "*FrontPanel: Geometry 996x74+$(($[vp.width] / 2 - 996 / 2))-0"'
*FrontPanel: Colorset 21
*FrontPanel: Font $[infostore.font.variable.normal.small]
*FrontPanel: Rows 24
*FrontPanel: Columns 50
*FrontPanel: BoxSize fixed

*FrontPanel: (1x24+0+0, Frame 0, Container(Rows 24, Columns 1, Frame 0))

*FrontPanel: (1x5+0+0, Colorset 1, Id PanelMenu, Frame 1, Icon NsCDE/FpMenu.xpm, Padding 0 0, \
 Action (Mouse 1) Next (FrontPanel, CirculateHit) Menu m_FrontPanelWinMenu rectangle $widthx$height+$left+$top o+0 -100m, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) Menu m_ControlFrontPanelMenu rectangle $widthx$height+$left+$top o+0 -100m, \
 Action (Mouse 2) Next (FrontPanel, CirculateHit) Menu m_TitleBarM2 rectangle $widthx$height+$left+$top o+0 -100m)

*FrontPanel: (1x19+0+5, Id PanelHandleLeft, Frame 1, Icon NsCDE/FpHandle.xpm, Padding 0 0, \
 Action (Mouse 1) Next (FrontPanel, CirculateHit) Move, \
 Action (Mouse 2) Next (FrontPanel, CirculateHit) f_FullyClearFrontPanelPressed, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) RaiseLower)

*FrontPanel: (End)

*FrontPanel: (15x5+1+0, Frame 0, Container(Rows 5, Columns 15, Frame 0))

*FrontPanel: (3x5, Id NsCDE-Subpanel1, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel1 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel1")

Test (r $[FVWM_USERDIR]/NsCDE-Subpanel2.conf) \
 *FrontPanel: (3x5, Id NsCDE-Subpanel2, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel2 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel2")
Test (!r $[FVWM_USERDIR]/NsCDE-Subpanel2.conf) \
 *FrontPanel: (3x5, Id NsCDE-Subpanel2, Colorset 1, Frame 1, Padding 1 1, \
  Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
  'f_RunQuickScriptDialog ActionForm "Do You Want To Enable Subpanel 2?" \
  Yes No "Enable Subpanel" "f_EnableSubpanel NsCDE-Subpanel2" Nop')

*FrontPanel: (3x5, Id NsCDE-Subpanel3, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel3 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel3")

*FrontPanel: (3x5, Id NsCDE-Subpanel4, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel4 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel4")

Test (r $[FVWM_USERDIR]/NsCDE-Subpanel5.conf) \
 *FrontPanel: (3x5, Id NsCDE-Subpanel5, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel5 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel5")
Test (!r $[FVWM_USERDIR]/NsCDE-Subpanel5.conf) \
 *FrontPanel: (3x5, Id NsCDE-Subpanel5, Colorset 1, Frame 1, Padding 1 1, \
 Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
 'f_RunQuickScriptDialog ActionForm "Do You Want To Enable Subpanel 5?" \
 Yes No "Enable Subpanel" "f_EnableSubpanel NsCDE-Subpanel5" Nop')

*FrontPanel: (End)

*FrontPanel: (15x19+1+5, Frame 1, Container(Rows 19, Columns 15, Frame 0))

*FrontPanel: (3x19, Id Btn1, Frame 0, PressColorset 24, Padding 0 0, Swallow (Respawn) \
 "pclock" "None (pclock) Exec exec $[NSCDE_ROOT]/bin/pclock -w -B $[FVWM_USERDIR]/icons/NsCDE/Fpclock.xpm" \
 Action (Mouse1) f_FrontPanelAction Btn1 M1, \
 Action (Mouse2) f_FrontPanelAction Btn1 M2, \
 Action (Mouse3) f_FrontPanelAction Btn1 M3)

*FrontPanel: (3x19, Id Btn2, Frame 0, PressColorset 24, Swallow (Respawn) "FPMonthDayApplet" \
 "Module FvwmScript MonthDayApplet")

*FrontPanel: (3x19, Id Btn3, Frame 0, PressColorset 24, Icon CDE/Fphome.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn3 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn3 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn3 M3)

*FrontPanel: (3x19, Id Btn4, Frame 0, PressColorset 24, Icon CDE/Fpterm.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn4 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn4 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn4 M3)

*FrontPanel: (3x19, Frame 0, Id Btn5, PressColorset 24, Swallow (Respawn) \
 "FPCheckMailApplet" "Module FvwmScript CheckMailApplet")

*FrontPanel: (End)

*FrontPanel: (18x24+16+0, Frame 2, Container(Rows 24, Columns 24, Frame 0))

*FrontPanel: (3x1+0+0, Frame 0, Id FpLock, PressColorset 25, Icon CDE/Fplock.s.pm, \
 Action (Mouse 1) f_Xscreensaver -lock, \
 Action (Mouse 2) Test (x xscreensaver) Exec exec pkill -STOP -u $USER -xf xscreensaver, \
 Action (Mouse 3) Test (x xscreensaver) Exec exec pkill -CONT -u $USER -xf xscreensaver)

*FrontPanel: (3x1+0-0, Frame 0, Id FpPageIndicator, Swallow (Respawn) \
 "PageIndicator" "Module FvwmScript PageIndicator $[infostore.pagematrixX] $[infostore.pagematrixY]" \
  Action (Mouse 2) "Module FvwmScript WsPgMgr $[infostore.desknum] $[infostore.pagematrixX] $[infostore.pagematrixY]"

*FrontPanel: (12x2+6+0, Frame 0, Id FpWSM, Swallow (Respawn) \
 "WSM" "Module FvwmScript WSM $[infostore.desknum] $[infostore.pagematrixX] $[infostore.pagematrixY]") \
  Action (Mouse 2) "Module FvwmScript WsPgMgr $[infostore.desknum] $[infostore.pagematrixX] $[infostore.pagematrixY]"

*FrontPanel: (3x1-0+0, Frame 0, Id FpLite, Swallow (Respawn) \
 "FpLite" "Module FvwmScript FpLite")

*FrontPanel: (3x1-0-0, Frame 0, Id FpExit, PressColorset 25, Icon CDE/Fpexit.s.pm, \
 Action f_RunQuickScriptDialog SysActionDialog)

*FrontPanel: (End)

*FrontPanel: (15x5+34+0, Frame 0, Container(Rows 5, Columns 15, Frame 0))

Test (r $[FVWM_USERDIR]/NsCDE-Subpanel6.conf) \
 *FrontPanel: (3x5, Id NsCDE-Subpanel6, Colorset 1, Frame 1, PressColorset 27, \
  Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel6 \
  "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel6")
Test (!r $[FVWM_USERDIR]/NsCDE-Subpanel6.conf) \
 *FrontPanel: (3x5, Id NsCDE-Subpanel6, Colorset 1, Frame 1, Padding 1 1, \
 Action (Mouse 2) f_DoubleClickExec fp_sub_enable_pending $[infostore.menudclicktm] \
 'f_RunQuickScriptDialog ActionForm "Do You Want To Enable Subpanel 6?" \
 Yes No "Enable Subpanel" "f_EnableSubpanel NsCDE-Subpanel6" Nop')

*FrontPanel: (3x5, Id NsCDE-Subpanel7, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel7 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel7")

*FrontPanel: (3x5, Id NsCDE-Subpanel8, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel8 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel8")

*FrontPanel: (3x5, Id NsCDE-Subpanel9, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel9 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel9")

*FrontPanel: (3x5, Id NsCDE-Subpanel10, Colorset 1, Frame 1, PressColorset 27, \
 Padding 1 1, Panel(up, smooth, delay 10, Hints, indicator 12, position Button left) NsCDE-Subpanel10 \
 "Module FvwmButtons -g -30000-30000 -transientpanel NsCDE-Subpanel10")

*FrontPanel: (End)

*FrontPanel: (15x19+34+5, Frame 1, Container(Rows 19, Columns 15, Frame 0))

*FrontPanel: (3x5, Frame 0, Id Btn6, PressColorset 24, Icon CDE/Fpprnt.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn6 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn6 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn6 M3)

*FrontPanel: (3x5, Frame 0, Id Btn7, PressColorset 24, Icon NsCDE/Fpstyle.l.xpm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn7 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn7 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn7 M3)

*FrontPanel: (3x5, Frame 0, Id Btn8, PressColorset 24, Icon CDE/Fpapps.l.pm Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn8 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn8 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn8 M3)

*FrontPanel: (3x5, Frame 0, Id Btn9, PressColorset 24, Icon NsCDE/Multimedia.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn9 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn9 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn9 M3)

*FrontPanel: (3x5, Frame 0, Id Btn10, PressColorset 24, Icon CDE/Fphelp.l.pm, Padding 0 0, \
 Action (Mouse 1) f_FrontPanelAction Btn10 M1, \
 Action (Mouse 2) f_FrontPanelAction Btn10 M2, \
 Action (Mouse 3) f_FrontPanelAction Btn10 M3)

*FrontPanel: (End)

*FrontPanel: (1x24+49+0, Frame 0, Container(Rows 24, Columns 1, Frame 0))

*FrontPanel: (1x5-0+0, Colorset 1, Id PanelIconify, Frame 1, Icon NsCDE/FpIconify.xpm, Padding 0 0, \
 Action Next (FrontPanel, CirculateHit) Iconify, \
 Action (Mouse 2) Nop, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) f_RaiseShadeFrontPanel)

*FrontPanel: (1x19-0+5, Id PanelHandleRight, Frame 1, Icon NsCDE/FpHandle.xpm, Padding 0 0, \
 Action Next (FrontPanel, CirculateHit) Move, \
 Action (Mouse 2) Next (FrontPanel, CirculateHit) f_FullyClearFrontPanelPressed, \
 Action (Mouse 3) Next (FrontPanel, CirculateHit) RaiseLower)

*FrontPanel: (End)

# Workaround for buggy xdotool which is itself workaround
Schedule 5000 Exec exec $[NSCDE_ROOT]/bin/xdowrapper

